# <img src="https://go.dev/blog/go-brand/Go-Logo/PNG/Go-Logo_Blue.png" alt="Go logo" width="40"/> Gotchas & Best Practices
*(–¥–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞, –ø–µ—Ä–µ—Ö–æ–¥—è—â–µ–≥–æ –Ω–∞ Go)*

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç Java

| üìò Java | üêπ Go |
|----------|--------|
| –í—Å—ë ‚Äî –∫–ª–∞—Å—Å—ã –∏ –æ–±—ä–µ–∫—Ç—ã | –¢–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ |
| –ï—Å—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è (try/catch) | –û—à–∏–±–∫–∏ ‚Äî –æ–±—ã—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (`error`) |
| –ï—Å—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –º–µ—Ç–æ–¥–æ–≤ –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ | –ù–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –≤—Å—ë –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —è–≤–Ω–æ |
| –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ `Thread`, `Executor` | –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º —á–µ—Ä–µ–∑ `goroutine` + `channel` |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –û–û–ü | –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –≤–º–µ—Å—Ç–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è |
| Null reference | Zero values (`0`, `""`, `nil`, `false`) |

---

## üß© 1. Zero Values
–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ **–≤—Å–µ–≥–¥–∞ –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**:

```go
var i int       // 0
var s string    // ""
var b bool      // false
var m map[string]int // nil
```

‚ö†Ô∏è –ï—Å–ª–∏ `map` –∏–ª–∏ `slice` —Ä–∞–≤–µ–Ω `nil`, –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω—É–∂–Ω–æ `make()`.

---

## üîß 2. make() vs new()

| –§—É–Ω–∫—Ü–∏—è | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ì–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|----------|-------------|------------------|
| `make()` | —Å–æ–∑–¥–∞—ë—Ç slice, map, channel | –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π |
| `new()`  | –≤—ã–¥–µ–ª—è–µ—Ç –ø–∞–º—è—Ç—å –ø–æ–¥ —Ç–∏–ø –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å | –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤ |

```go
s := make([]int, 0, 10)
p := new(int)
*p = 42
```

---

## üßÆ 3. –°—Ä–µ–∑—ã (Slices)
```go
s := make([]int, 0, 5)
s = append(s, 1, 2, 3)
```

- `len` ‚Äî –¥–ª–∏–Ω–∞, `cap` ‚Äî —ë–º–∫–æ—Å—Ç—å.  
- `append` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–Ω–æ–≤—ã–π** —Å—Ä–µ–∑.  
- –ù–∏–∫–∞–∫–∏—Ö `add()` ‚Äî –≤—Å—ë —á–µ—Ä–µ–∑ `append()`.

üí° –õ—É—á—à–µ `make([]int, 0, N)` –≤–º–µ—Å—Ç–æ `make([]int, N)` –µ—Å–ª–∏ –±—É–¥–µ—à—å –∞–ø–ø–µ–Ω–¥–∏—Ç—å.

---

## üö¶ 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏

–ù–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–π ‚Äî –æ—à–∏–±–∫–∏ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è.

```go
data, err := os.ReadFile("file.txt")
if err != nil {
    log.Fatal(err)
}
fmt.Println(string(data))
```

- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π `err`.  
- –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `errors.Is` / `errors.As`.  

---

## ‚öôÔ∏è 5. Defer, Panic, Recover

- `defer` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (LIFO)** –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏.
- `panic` = –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –Ω–æ –Ω–µ —Å—Ç–æ–∏—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å.
- `recover()` –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å, —á—Ç–æ–±—ã –ø–æ–π–º–∞—Ç—å `panic`.

```go
defer fmt.Println("End")
defer fmt.Println("Cleanup")
fmt.Println("Start")
// –í—ã–≤–µ–¥–µ—Ç: Start ‚Üí Cleanup ‚Üí End
```

---

## üí¨ 6. –°—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –º–µ—Ç–æ–¥—ã

```go
type User struct {
  Name string
  Age  int
}

func (u *User) Greet() {
  fmt.Println("Hello,", u.Name)
}
```

- –ú–µ—Ç–æ–¥—ã –æ–±—ä—è–≤–ª—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–µ –≤–Ω—É—Ç—Ä–∏ struct.
- –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é (`u User`) —Å–æ–∑–¥–∞—ë—Ç –∫–æ–ø–∏—é.
- –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é (`*User`) –∏–∑–º–µ–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª.

---

## ‚öñÔ∏è 7. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è **–Ω–µ—è–≤–Ω–æ**.

```go
type Greeter interface {
  Greet()
}

type Person struct{ Name string }

func (p Person) Greet() {
  fmt.Println("Hi,", p.Name)
}

func greetAll(g Greeter) {
  g.Greet()
}
```

---

## üîÑ 8. Goroutines –∏ Channels

```go
go func() {
  fmt.Println("async!")
}()

ch := make(chan int)
go func() { ch <- 42 }()
fmt.Println(<-ch)
```

- `go` –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ.  
- `chan` ‚Äî –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏.  
- –ù–µ –±–ª–æ–∫–∏—Ä—É–π –∫–∞–Ω–∞–ª –±–µ–∑ `go`.  

---

## üß† 9. Context

–î–ª—è –æ—Ç–º–µ–Ω—ã –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤:

```go
ctx, cancel := context.WithTimeout(context.Background(), time.Second)
defer cancel()

select {
case <-time.After(2 * time.Second):
  fmt.Println("timeout!")
case <-ctx.Done():
  fmt.Println("cancelled:", ctx.Err())
}
```

---

## ü™£ 10. Maps

```go
m := make(map[string]int)
m["a"] = 1
val, ok := m["b"] // ok = false –µ—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç
```

- –ù–µ—Ç `containsKey` ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ `ok`.  
- `nil` map –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å, —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å.  

---

## üß∞ 11. –¢–µ—Å—Ç—ã

```go
func TestAdd(t *testing.T) {
  got := Add(2, 2)
  want := 4
  if got != want {
    t.Errorf("got %v want %v", got, want)
  }
}
```

–ó–∞–ø—É—Å–∫:  
```
go test ./...
```

---

## üöÄ 12. –ú–µ–ª–æ—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –ø—É—Ç–∞—é—Ç

- `:=` ‚Äî –∫–æ—Ä–æ—Ç–∫–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ **—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π**.  
- `for` ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ü–∏–∫–ª, `while` –Ω–µ—Ç.  
- `range` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω–¥–µ–∫—Å –∏ –∑–Ω–∞—á–µ–Ω–∏–µ.  
- `_` ‚Äî –∏–≥–Ω–æ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.  
- –ò–º–µ–Ω–∞ —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã = —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ.  
- –ü–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–∞ `defer` ‚Äî **–≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ**.  
- `init()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ `main()`.

---

---

üêπ Go ‚Äî —ç—Ç–æ –ø—Ä–æ *–ø—Ä–æ—Å—Ç–æ—Ç—É –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å*, –∞ –Ω–µ –ø—Ä–æ "—É–¥–æ–±—Å—Ç–≤–æ –ª—é–±–æ–π —Ü–µ–Ω–æ–π".  
–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –∫–∞–∂–µ—Ç—Å—è "—Å–ª–∏—à–∫–æ–º –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–º" ‚Äî –≤–µ—Ä–æ—è—Ç–Ω–æ, —Ç–∞–∫ –∏ –∑–∞–¥—É–º–∞–Ω–æ üòâ
